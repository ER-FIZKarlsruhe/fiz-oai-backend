FROM tomcat:9-jre11-openjdk-slim
MAINTAINER "FIZ-Karlsruhe"

ARG UNAME=oai_backend
ARG UID=8007
ARG GID=8007

#ARG UNAME=admin
#ARG UID=1000
#ARG GID=1000

RUN groupadd -g $GID -o $UNAME
RUN useradd -m -u $UID -g $GID -o -s /bin/bash $UNAME

RUN chown -R ${UNAME}:${UNAME} /usr/local/tomcat/
RUN chmod -R 770 /usr/local/tomcat/

USER $UNAME

COPY target/oai-backend.war /usr/local/tomcat/webapps

RUN curl -SL https://groovy.jfrog.io/artifactory/dist-release-local/groovy-zips/apache-groovy-binary-3.0.13.zip | unzip apache-groovy-binary-3.0.10.zip -d /usr/local/